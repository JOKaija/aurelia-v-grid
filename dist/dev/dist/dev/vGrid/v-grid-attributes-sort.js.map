{"version":3,"sources":["vGrid/v-grid-attributes-sort.js"],"names":["inject","customAttribute","VGrid","vGridAttributesSort","Element","element","vGrid","bind","bindingContext","overrideContext","values","value","split","attribute","attached","sortIcon","document","createElement","innerHTML","getSortIconMarkup","appendChild","onclick","e","vGridConfig","onOrderBy","shiftKey","addEventListener","css","markup","sortIconSort","isAscHtml","sortIconAsc","isDescHtml","sortIconDesc","vGridSort","getFilter","forEach","x","block","asc","main","sortIconNo","no"],"mappings":";;;;;;;;;;;;;;;AAKQA,Y,qBAAAA,M;AAAQC,qB,qBAAAA,e;;AACRC,W,UAAAA,K;;;qCAKKC,mB,WAFZF,gBAAgB,QAAhB,C,UACAD,OAAOI,OAAP,EAAgBF,KAAhB,C;AAIC,qCAAYG,OAAZ,EAAqBC,KAArB,EAA4B;AAAA;;AAC1B,eAAKA,KAAL,GAAaA,KAAb;AACA,eAAKD,OAAL,GAAeA,OAAf;AACD;;sCAIDE,I,iBAAKC,c,EAAgBC,e,EAAiB;AACpC,eAAKD,cAAL,GAAsBA,cAAtB;AACA,eAAKC,eAAL,GAAuBA,eAAvB;;AAGA,cAAIC,SAAS,KAAKC,KAAL,CAAWC,KAAX,CAAiB,GAAjB,CAAb;AACA,eAAKC,SAAL,GAAiBH,OAAO,CAAP,CAAjB;AAED,S;;sCAGDI,Q,uBAAW;AAAA;;AACT,eAAKC,QAAL,GAAgBC,SAASC,aAAT,CAAuB,MAAvB,CAAhB;AACA,eAAKF,QAAL,CAAcG,SAAd,GAA0B,KAAKC,iBAAL,CAAuB,KAAKN,SAA5B,CAA1B;AACA,eAAKR,OAAL,CAAae,WAAb,CAAyB,KAAKL,QAA9B;AACA,eAAKV,OAAL,CAAagB,OAAb,GAAuB,UAACC,CAAD,EAAM;AAC3B,kBAAKhB,KAAL,CAAWiB,WAAX,CAAuBC,SAAvB,CAAiC,MAAKX,SAAtC,EAAiDS,EAAEG,QAAnD;AACD,WAFD;;AAIA,eAAKnB,KAAL,CAAWD,OAAX,CAAmBqB,gBAAnB,CAAoC,gBAApC,EAAsD,YAAK;AACzD,kBAAKX,QAAL,CAAcG,SAAd,GAA0B,MAAKC,iBAAL,CAAuB,MAAKN,SAA5B,CAA1B;AACD,WAFD;AAGD,S;;sCAGDM,iB,8BAAkBN,S,EAAW;AAAA;;AAC3B,cAAIc,MAAM,KAAKrB,KAAL,CAAWiB,WAAX,CAAuBI,GAAjC;;AAEA,cAAIC,4BAA0BD,IAAIZ,QAA9B,SAA0CY,IAAIE,YAA9C,cAAJ;AACA,cAAIC,+BAA6BH,IAAIZ,QAAjC,SAA6CY,IAAII,WAAjD,cAAJ;AACA,cAAIC,gCAA8BL,IAAIZ,QAAlC,SAA8CY,IAAIM,YAAlD,cAAJ;;AAGA,eAAK3B,KAAL,CAAW4B,SAAX,CAAqBC,SAArB,GAAiCC,OAAjC,CAAyC,UAACC,CAAD,EAAO;AAC9C,gBAAIA,EAAExB,SAAF,KAAgB,OAAKA,SAAzB,EAAoC;AAClC,kBAAIyB,QAAQD,EAAEE,GAAF,KAAU,IAAV,GAAiBT,SAAjB,GAA6BE,UAAzC;AACA,kBAAIQ,2BAAyBb,IAAIc,UAA7B,0BAA4DJ,EAAEK,EAA9D,cAAJ;AACAd,uBAASY,OAAOF,KAAhB;AACD;AACF,WAND;;AAQA,iBAAOV,MAAP;AACD,S","file":"vGrid/v-grid-attributes-sort.js","sourceRoot":"/source/","sourcesContent":["/*****************************************************************************************************************\r\n *    Attributes for header, enables sorting\r\n *    Created by vegar ringdal\r\n *\r\n ****************************************************************************************************************/\r\nimport {inject, customAttribute} from 'aurelia-framework';\r\nimport {VGrid} from './v-grid';\r\n\r\n\r\n@customAttribute('v-sort')\r\n@inject(Element, VGrid)\r\nexport class vGridAttributesSort {\r\n\r\n\r\n  constructor(element, vGrid) {\r\n    this.vGrid = vGrid;\r\n    this.element = element;\r\n  }\r\n\r\n\r\n\r\n  bind(bindingContext, overrideContext) {\r\n    this.bindingContext = bindingContext;\r\n    this.overrideContext = overrideContext;\r\n\r\n    //get values\r\n    let values = this.value.split(\"|\");\r\n    this.attribute = values[0];\r\n\r\n  }\r\n\r\n\r\n  attached() {\r\n    this.sortIcon = document.createElement(\"SPAN\");\r\n    this.sortIcon.innerHTML = this.getSortIconMarkup(this.attribute);\r\n    this.element.appendChild(this.sortIcon);\r\n    this.element.onclick = (e)=> {\r\n      this.vGrid.vGridConfig.onOrderBy(this.attribute, e.shiftKey);\r\n    };\r\n\r\n    this.vGrid.element.addEventListener(\"sortIconUpdate\", ()=> {\r\n      this.sortIcon.innerHTML = this.getSortIconMarkup(this.attribute);\r\n    });\r\n  }\r\n\r\n\r\n  getSortIconMarkup(attribute) {\r\n    var css = this.vGrid.vGridConfig.css;\r\n\r\n    var markup = `<span  class=\"${css.sortIcon} ${css.sortIconSort}\"></span>`;\r\n    var isAscHtml = `<span  class=\"${css.sortIcon} ${css.sortIconAsc}\"></span>`;\r\n    var isDescHtml = `<span  class=\"${css.sortIcon} ${css.sortIconDesc}\"></span>`;\r\n\r\n\r\n    this.vGrid.vGridSort.getFilter().forEach((x) => {\r\n      if (x.attribute === this.attribute) {\r\n        var block = x.asc === true ? isAscHtml : isDescHtml;\r\n        var main = `<span $ class=\"${css.sortIconNo}\" data-vgridsort=\"${x.no}\"></span>`;\r\n        markup = main + block;\r\n      }\r\n    });\r\n\r\n    return markup;\r\n  }\r\n\r\n\r\n}\r\n"]}