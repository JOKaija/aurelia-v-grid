{"version":3,"sources":["vGrid/v-grid-attributes-contextmenu.js"],"names":["inject","customAttribute","VGrid","Contextmenu","VGridHeaderMenu","Element","classToOpenOn","altMenuLogic","menuItemListener","link","value","getAttribute","filterMenuLogic","defaultMenu","canOpen","menuHtmlMain","createMenuHTML","action","getLang","isHeader","menuHtmlSetFilter","triggerEvent","attribute","vGrid","vGridConfig","onFilterRun","vGridFilter","lastFilter","toggleMenuOff","replaceMenu","name","data","event","CustomEvent","detail","bubbles","element","dispatchEvent","newOperator","operator","ContextRowMenu","cellValue","bindingContext","rowRef","rows","vGridSelection","getSelectedRows","forEach","x","vGridCollectionFiltered","vGridGenerator","rebindAllRowSlots"],"mappings":"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","file":"vGrid/v-grid-attributes-contextmenu.js","sourceRoot":"/source/","sourcesContent":["/*****************************************************************************************************************\r\n *    ContextMenu\r\n *    This is where I create all the <v-grid> attributes, and set then to vGridConfig\r\n *    Main idea/source https://github.com/callmenick/Custom-Context-Menu\r\n *    Created by vegar ringdal\r\n *\r\n ****************************************************************************************************************/\r\n\r\nimport {inject, customAttribute} from 'aurelia-framework';\r\nimport {VGrid} from './v-grid';\r\nimport {Contextmenu} from './v-grid-contextmenu';\r\n\r\n\r\n/*****************************************************\r\n *  context menu for header\r\n ******************************************************/\r\n@customAttribute('v-header-menu')\r\n@inject(Element, VGrid)\r\nexport class VGridHeaderMenu extends Contextmenu {\r\n  classToOpenOn = \"vGrid-header-menu\"; //class it opens menu on\r\n  altMenuLogic = null; //alt menu to open\r\n\r\n\r\n  //main menu listener\r\n  menuItemListener(link) {\r\n    var value = link.getAttribute(\"data-action\");\r\n\r\n    if (this.altMenuLogic) {\r\n      this.filterMenuLogic(value);\r\n    } else {\r\n      this.defaultMenu(value);\r\n    }\r\n  }\r\n\r\n\r\n  canOpen() {\r\n    return true;\r\n  }\r\n\r\n\r\n  //main menu to open\r\n  menuHtmlMain() {\r\n    return this.createMenuHTML([\r\n      {\r\n        action: \"\",\r\n        value: this.getLang(\"menuMainHeaderOptions\") || \"Options\",\r\n        isHeader: true\r\n      }, {\r\n        action: \"clear-cell\",\r\n        value: this.getLang(\"menuMainHeaderClearCell\") || \"Clear cell\"\r\n      }, {\r\n        action: \"clear-all\",\r\n        value: this.getLang(\"menuMainHeaderClearAllCells\") || \"Clear All Cells\"\r\n      }, {\r\n        action: \"show-all\",\r\n        value: this.getLang(\"menuMainHeaderShowAll\") || \"Show all (keep filter text)\"\r\n      }, {\r\n        action: \"set-filter\",\r\n        value: this.getLang(\"menuMainHeaderSetFilter\") || \"Set Filter\"\r\n      }\r\n    ]);\r\n  }\r\n\r\n\r\n  //alt menu I manually set\r\n  menuHtmlSetFilter() {\r\n    return this.createMenuHTML([\r\n      {\r\n        action: \"\",\r\n        value: this.getLang(\"menuFilterHeaderSetFilter\") || \"Set filter\",\r\n        isHeader: true\r\n      }, {\r\n        action: \"set-filter-1\",\r\n        value: this.getLang(\"menuFilterHeaderEquals\") || \"equals\"\r\n      }, {\r\n        action: \"set-filter-2\",\r\n        value: this.getLang(\"menuFilterHeaderLessThanOrEq\") || \"less than or eq\"\r\n      }, {\r\n        action: \"set-filter-3\",\r\n        value: this.getLang(\"menuFilterHeaderGreaterThanOrEq\") || \"greater than or eq\"\r\n      }, {\r\n        action: \"set-filter-4\",\r\n        value: this.getLang(\"menuFilterHeaderLessThan\") || \"less than\"\r\n      }, {\r\n        action: \"set-filter-5\",\r\n        value: this.getLang(\"menuFilterHeaderGreaterThan\") || \"greater than\"\r\n      }, {\r\n        action: \"set-filter-6\",\r\n        value: this.getLang(\"menuFilterHeaderContains\") || \"contains\"\r\n      }, {\r\n        action: \"set-filter-7\",\r\n        value: this.getLang(\"menuFilterHeaderNotEqualTo\") || \"not equal to\"\r\n      }, {\r\n        action: \"set-filter-8\",\r\n        value: this.getLang(\"menuFilterHeaderDoesNotContain\") || \"does not contain\"\r\n      }, {\r\n        action: \"set-filter-9\",\r\n        value: this.getLang(\"menuFilterHeaderBeginsWith\") || \"begins with\"\r\n      }, {\r\n        action: \"set-filter-10\",\r\n        value: this.getLang(\"menuFilterEndsWith\") || \"ends with\"\r\n      }\r\n    ]);\r\n  }\r\n\r\n\r\n  defaultMenu(value) {\r\n\r\n    switch (value) {\r\n      case \"clear-cell\" :\r\n        this.triggerEvent(\"filterClearCell\", {\r\n          attribute: this.value\r\n        });\r\n        this.vGrid.vGridConfig.onFilterRun(this.vGrid.vGridFilter.lastFilter);\r\n        this.toggleMenuOff();\r\n        break;\r\n      case \"clear-all\" :\r\n        this.triggerEvent(\"filterClearAll\", {\r\n          attribute: this.value\r\n        });\r\n        this.vGrid.vGridConfig.onFilterRun(this.vGrid.vGridFilter.lastFilter);\r\n        this.toggleMenuOff();\r\n        break;\r\n      case \"show-all\":\r\n        this.vGrid.vGridConfig.onFilterRun([]);\r\n        this.toggleMenuOff();\r\n        break;\r\n      case \"set-filter\":\r\n        this.replaceMenu(this.menuHtmlSetFilter());\r\n        this.altMenuLogic = this.filterMenuLogic;\r\n        break;\r\n      default:\r\n        this.toggleMenuOff();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  triggerEvent(name, data) {\r\n    let event = new CustomEvent(name, {\r\n      detail: data,\r\n      bubbles: true\r\n    });\r\n    this.vGrid.element.dispatchEvent(event);\r\n  }\r\n\r\n\r\n  filterMenuLogic(value) {\r\n    var newOperator = null;\r\n    switch (value) {\r\n      case \"set-filter-1\":\r\n        newOperator = \"=\";\r\n        break;\r\n      case \"set-filter-2\":\r\n        newOperator = \"<=\";\r\n        break;\r\n      case \"set-filter-3\":\r\n        newOperator = \">=\";\r\n        break;\r\n      case \"set-filter-4\":\r\n        newOperator = \"<\";\r\n        break;\r\n      case \"set-filter-5\":\r\n        newOperator = \">\";\r\n        break;\r\n      case \"set-filter-6\":\r\n        newOperator = \"*\";\r\n        break;\r\n      case \"set-filter-7\":\r\n        newOperator = \"!=\";\r\n        break;\r\n      case \"set-filter-8\":\r\n        newOperator = \"!*\";\r\n        break;\r\n      case \"set-filter-9\":\r\n        newOperator = \"*=\";\r\n        break;\r\n      case \"set-filter-10\":\r\n        newOperator = \"=*\";\r\n        this.toggleMenuOff();\r\n        break;\r\n      default:\r\n        this.toggleMenuOff();\r\n    }\r\n    if (newOperator) {\r\n      this.triggerEvent(\"filterUpdate\", {\r\n        attribute: this.value,\r\n        operator: newOperator\r\n      });\r\n      this.toggleMenuOff();\r\n    }\r\n\r\n\r\n    this.altMenuLogic = null; //reset to main menu again\r\n  }\r\n\r\n\r\n}\r\n\r\n\r\n/*****************************************************\r\n *  main context menu for row cells\r\n ******************************************************/\r\n\r\n@customAttribute('v-row-menu')\r\n@inject(Element, VGrid)\r\nexport class ContextRowMenu extends Contextmenu {\r\n  classToOpenOn = \"vGrid-row-menu\"; //class it opens menu on\r\n  altMenuLogic = null; //alt menu to open\r\n\r\n\r\n  //main menu listener\r\n  menuItemListener(link) {\r\n    var value = link.getAttribute(\"data-action\");\r\n    if (this.altMenuLogic) {\r\n      this.filterMenuLogic(value);\r\n    } else {\r\n      this.defaultMenu(value);\r\n    }\r\n  }\r\n\r\n\r\n  canOpen() {\r\n    return true;\r\n  }\r\n\r\n\r\n  //main menu to open\r\n  menuHtmlMain() {\r\n    return this.createMenuHTML([\r\n      {\r\n        action: \"\",\r\n        value: this.getLang(\"menuRowOptions\") || \"Options\",\r\n        isHeader: true\r\n      }, {\r\n        action: \"copy-cell\",\r\n        value: this.getLang(\"menuRowCopyCellValue\") || \"Copy cell value\",\r\n        isHeader: false\r\n      }, {\r\n        action: \"paste-cell\",\r\n        value: this.getLang(\"menuRowCopyPasteIntoCell\") || \"Paste into cell/selected rows\",\r\n        isHeader: false\r\n      }\r\n    ]);\r\n  }\r\n\r\n\r\n  defaultMenu(value) {\r\n    switch (value) {\r\n      case \"copy-cell\":\r\n        this.vGrid.vGridConfig.cellValue = this.bindingContext.rowRef[this.value];\r\n        this.toggleMenuOff();\r\n        break;\r\n      case \"paste-cell\":\r\n        if (this.vGrid.vGridConfig.cellValue !== null) {\r\n          var rows = this.vGrid.vGridSelection.getSelectedRows();\r\n          rows.forEach((x)=> {\r\n            this.vGrid.vGridCollectionFiltered[x][this.value] = this.vGrid.vGridConfig.cellValue;\r\n          });\r\n          this.vGrid.vGridGenerator.rebindAllRowSlots();\r\n        }\r\n        this.toggleMenuOff();\r\n        break;\r\n      default:\r\n        this.toggleMenuOff();\r\n    }\r\n  }\r\n\r\n}\r\n"]}